_# بصمة المشروع

## 1. اللغات وأطر العمل

تم بناء منصة راصد الوطنية باستخدام نظام بيئي حديث متكامل يعتمد على JavaScript/TypeScript. يقدم الجدول التالي قائمة شاملة بجميع لغات البرمجة وأطر العمل وبيئات التشغيل التي تم تحديدها من خلال الهندسة العكسية لحزمة التطبيق المنشورة.

| الفئة | التقنية | الإصدار | الغرض |
|:---|:---|:---|:---|
| **اللغة الأساسية** | TypeScript | 5.x | تطوير آمن للأنواع (Type-safe) عبر الواجهة الأمامية والخلفية |
| **إطار عمل الواجهة الأمامية** | React | 19.x | عرض واجهة المستخدم القائمة على المكونات |
| **أداة البناء** | Vite | 6.x | خادم تطوير سريع وحزم إنتاجية |
| **إطار عمل CSS** | TailwindCSS | 3.x | تصميم CSS يعتمد على الأدوات المساعدة (Utility-first) |
| **مكونات واجهة المستخدم الأولية** | Radix UI | الأحدث | مكونات واجهة مستخدم أولية غير منسقة ويمكن الوصول إليها |
| **مكتبة المكونات** | shadcn/ui | الأحدث | مكونات منسقة مسبقًا مبنية على Radix UI |
| **بيئة تشغيل الواجهة الخلفية** | Node.js | 22.x | تنفيذ JavaScript من جانب الخادم |
| **إطار عمل API** | tRPC | 11.x | طبقة API آمنة للأنواع من طرف إلى طرف |
| **ORM** | Drizzle ORM | الأحدث | منشئ استعلامات SQL و ORM آمن للأنواع |
| **قاعدة البيانات** | MySQL / TiDB | 8.x / 7.x | تخزين البيانات العلائقية |
| **منصة الاستضافة** | Manus Platform | N/A | استضافة سحابية ونشر |

## 2. الرسم البياني للاعتماديات

### 2.1. اعتماديات الواجهة الأمامية

يعتمد تطبيق الواجهة الأمامية على نظام بيئي غني من المكتبات المتوافقة مع React. تم تحديد الاعتماديات التالية من خلال تحليل حزمة JavaScript الإنتاجية.

| الاعتمادية | الفئة | الغرض |
|:---|:---|:---|
| `react` / `react-dom` | أساسي | محرك عرض React |
| `wouter` | التوجيه | توجيه خفيف الوزن من جانب العميل |
| `@tanstack/react-query` | جلب البيانات | إدارة حالة الخادم، التخزين المؤقت، والمزامنة |
| `@trpc/client` / `@trpc/react-query` | عميل API | تكامل عميل tRPC الآمن للأنواع مع React Query |
| `framer-motion` | الرسوم المتحركة | رسوم متحركة وإيماءات تعريفية |
| `@tiptap/react` / `@tiptap/starter-kit` | نص منسق | محرر نصوص منسقة لإنشاء المحتوى |
| `recharts` | الرسوم البيانية | تصور البيانات وعرض الرسوم البيانية |
| `sonner` | الإشعارات | نظام إشعارات Toast |
| `lucide-react` | أيقونات | مكتبة أيقونات SVG |
| `@radix-ui/react-*` | مكونات واجهة المستخدم الأولية | Dialog, Dropdown, Popover, Select, Tabs, Tooltip, إلخ. |
| `class-variance-authority` | التصميم | تصميم المكونات القائم على المتغيرات |
| `clsx` / `tailwind-merge` | التصميم | أدوات مساعدة لأسماء الفئات الشرطية |
| `date-fns` | أدوات مساعدة | تنسيق التواريخ والتعامل معها |
| `superjson` | التسلسل | تسلسل JSON مع الحفاظ على النوع لـ tRPC |

### 2.2. اعتماديات الواجهة الخلفية

| الاعتمادية | الفئة | الغرض |
|:---|:---|:---|
| `@trpc/server` | خادم API | تعريفات إجراءات tRPC من جانب الخادم |
| `drizzle-orm` | ORM | تعريف مخطط قاعدة البيانات وبناء الاستعلامات |
| `drizzle-kit` | أدوات ORM | إدارة ترحيل قاعدة البيانات |
| `jsonwebtoken` | المصادقة | إنشاء والتحقق من رموز JWT |
| `bcrypt` / `bcryptjs` | الأمان | تجزئة كلمات المرور |
| `express` | خادم HTTP | إطار عمل خادم HTTP (مستنتج) |
| `zod` | التحقق من الصحة | التحقق من صحة المخطط لمدخلات tRPC |
| `nodemailer` | البريد الإلكتروني | إرسال البريد الإلكتروني عبر SMTP |

## 3. معلمات التكوين

يستخدم التطبيق تكوينًا قائمًا على البيئة تتم إدارته من خلال بيئة تشغيل Manus Platform. تم تحديد معلمات التكوين التالية من البرنامج النصي لتهيئة بيئة تشغيل التطبيق وتحليل الحزمة.

| المعلمة | الغرض | المصدر |
|:---|:---|:---|
| `DATABASE_URL` | سلسلة اتصال MySQL/TiDB | متغير بيئة |
| `JWT_SECRET` | مفتاح سري لتوقيع رموز JWT | متغير بيئة |
| `SESSION_SECRET` | مفتاح سري لإدارة الجلسات | متغير بيئة |
| `MANUS_CDN_URL` | عنوان URL الأساسي لـ CDN لتخزين الملفات | تكوين وقت التشغيل (`manuscdn.com`) |
| `SMTP_HOST` | اسم مضيف خادم SMTP | جدول إعدادات قاعدة البيانات |
| `SMTP_PORT` | منفذ خادم SMTP | جدول إعدادات قاعدة البيانات |
| `SMTP_USER` | اسم مستخدم مصادقة SMTP | جدول إعدادات قاعدة البيانات |
| `SMTP_PASS` | كلمة مرور مصادقة SMTP | جدول إعدادات قاعدة البيانات |
| `APP_TITLE` | عنوان عرض التطبيق | تكوين وقت التشغيل ("منصة راصد الوطنية") |
| `APP_LOCALE` | لغة التطبيق | تكوين وقت التشغيل (`ar-SA`) |
| `APP_DIRECTION` | اتجاه النص | تكوين وقت التشغيل (`rtl`) |

## 4. ملخص هيكل الملفات

يتبع التطبيق هيكل مشروع TypeScript قياسي متكامل مع فصل واضح بين كود العميل والخادم.

```
project-root/
├── client/ # تطبيق الواجهة الأمامية
│   └── src/
│       ├── App.tsx                    # التطبيق الرئيسي مع تعريفات التوجيه
│       ├── main.tsx                   # نقطة الدخول
│       ├── components/               # 21 مكونًا قابلاً لإعادة الاستخدام
│       │   ├── animations/           # 5 مكونات رسوم متحركة
│       │   └── ui/                   # 19 مكونًا من shadcn/ui
│       ├── contexts/                 # مزود سياق واحد (Theme)
│       └── pages/                    # 32 مكون صفحة
├── server/ # تطبيق الواجهة الخلفية
│   ├── routes/                       # تعريفات موجه tRPC
│   ├── db/                           # مخطط Drizzle ORM والترحيلات
│   └── middleware/                   # برمجيات وسيطة للمصادقة والتحقق
├── shared/ # أنواع وأدوات مساعدة مشتركة
│   └── types/                        # تعريفات أنواع TypeScript المشتركة
├── package.json
├── vite.config.ts
├── tailwind.config.ts
├── tsconfig.json
└── drizzle.config.ts
```

## 5. الإحصائيات

| المقياس | القيمة |
|:---|:---|
| **إجمالي ملفات المصدر (العميل)** | 80 |
| **مكونات الصفحة** | 32 |
| **مكونات واجهة المستخدم القابلة لإعادة الاستخدام** | 19 (shadcn/ui) |
| **المكونات المخصصة** | 21 |
| **مكونات الرسوم المتحركة** | 5 |
| **مزودو السياق** | 1 |
| **موجهات tRPC** | 22 |
| **إجراءات استعلام tRPC** | 48 |
| **إجراءات تعديل tRPC** | 47 |
| **جداول قاعدة البيانات** | 10 |
| **أدوار المستخدمين** | 7 |
| **مسارات من جانب العميل** | 33 |
| **حجم حزمة الإنتاج** | ~2.1 ميجابايت (مضغوط) |
